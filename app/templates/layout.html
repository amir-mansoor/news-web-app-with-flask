<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{% block title %}Flask News App{% endblock %}</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body class="bg-gray-100 min-h-screen flex flex-col">
    <nav
      class="bg-white shadow-md px-6 py-4 flex flex-wrap md:flex-nowrap justify-between items-center"
    >
      <!-- Logo -->
      <a
        href="/"
        class="text-2xl font-extrabold text-blue-600 flex items-center gap-2"
      >
        📰 <span>Flask News</span>
      </a>

      <!-- Categories -->
      <div
        class="flex flex-wrap justify-center gap-3 mt-4 md:mt-0 md:ml-6 text-sm text-gray-600 font-medium"
      >
        {% for cat in categories %}
        <a
          href="{{ url_for('main.filter_by_category', name=cat[1]) }}"
          class="hover:text-blue-600 transition-colors"
        >
          {{ cat[1] }}
        </a>
        {% endfor %}
      </div>

      <!-- Search bar -->
      <form
        method="GET"
        action="{{ url_for('main.search') }}"
        class="flex mt-4 md:mt-0 md:ml-6"
      >
        <input
          type="text"
          name="q"
          placeholder="Search news..."
          required
          class="px-3 py-1.5 border rounded-l-md border-gray-300 focus:outline-none focus:ring focus:border-blue-500 text-sm"
        />
        <button
          type="submit"
          class="px-3 py-1.5 bg-blue-600 text-white rounded-r-md text-sm hover:bg-blue-700 transition-colors"
        >
          🔍
        </button>
      </form>

      <!-- User Section -->
      <div class="flex items-center gap-3 mt-4 md:mt-0 md:ml-6 text-sm">
        {% if current_user.is_authenticated %}
        <a href="{{ url_for('user.user_profile', email=current_user.email) }}"
          ><span class="text-gray-700">👤 {{ current_user.username }}</span></a
        >
        {% if current_user.role == 'admin' %}
        <a href="/add" class="text-blue-600 hover:underline">Add News</a>
        <a
          href="{{url_for('admin.dashboard')}}"
          class="text-blue-600 hover:underline"
          >Dashboard</a
        >
        <a
          href="{{ url_for('admin.manage_users') }}"
          class="text-blue-600 hover:underline"
          >Manage Users</a
        >
        <a
          href="{{ url_for('admin.manage_comments') }}"
          class="text-blue-600 hover:underline"
        >
          Manage Comments</a
        >
        <a
          href="{{ url_for('admin.manage_categories') }}"
          class="text-blue-600 hover:underline"
        >
          Manage Categories</a
        >
        {% endif %}
        <a href="/logout" class="text-red-600 hover:underline">Logout</a>
        {% else %}
        <a href="/login" class="text-blue-600 hover:underline">Login</a>
        <a href="/register" class="text-blue-600 hover:underline">Register</a>
        {% endif %}
      </div>
    </nav>

    <main class="flex-grow container mx-auto p-6">
      {% with messages = get_flashed_messages() %} {% if messages %}
      <div class="mb-4 bg-green-100 text-green-800 p-4 rounded">
        {% for message in messages %}
        <p>{{ message }}</p>
        {% endfor %}
      </div>
      {% endif %} {% endwith %} {% block content %}{% endblock %}
    </main>

    <footer class="bg-gray-200 text-center py-4">
      &copy; {{ now().year }} Flask News App
    </footer>
  </body>
</html>
